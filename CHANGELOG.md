# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased]

### Fixed

- **Export Modal Content Overflow** (Issue #102)
  - Fixed export modal layout to prevent content overflow and button cutoff
  - Added flex-column layout with scrollable content area
  - Header and footer sections now remain fixed and visible
  - Content area (export options and preview) scrolls independently
  - Added data-testid attributes for improved testability
  - Ensures all action buttons (Copy, Download, Close) are always accessible
  - Improves UX when exporting retrospectives with many items

- **Board Archive Navigation** (Issue #99)
  - Fixed auto-switch to active tab when unarchiving the last archived board
  - Replaced setTimeout-based callback with useEffect for reliable state tracking
  - Added user-friendly toast notification when auto-switching views
  - Prevents dead-end UX where users are stuck on empty archived tab
  - Comprehensive Cypress E2E test coverage for archive navigation scenarios

### Added

- **Anonymous Asset Claiming System** (Issue #100)
  - Automatic claiming of anonymous assets (retrospective boards and planning poker sessions) when users create accounts
  - Generic, extensible architecture supporting multiple asset types
  - Client-side tracking via localStorage for anonymous board and session creation
  - Server-side validation using cookies to ensure secure asset ownership
  - Seamless integration with signup and signin flows
  - Assets automatically claimed on both signup and signin events
  - Anonymous user warnings hidden for authenticated users on boards and poker pages
  - Database RLS policies updated to support claiming transition
  - Comprehensive E2E test coverage for asset claiming scenarios
  - Features:
    - Track retrospective boards created anonymously
    - Track planning poker sessions created anonymously
    - Claim all assets in single operation during authentication
    - Graceful error handling and edge case management
    - Success notifications showing number of claimed assets
    - Device-specific claiming (assets claimed where they were created)
  - Infrastructure designed for easy addition of future asset types
  - Note: Assets created anonymously on one device are claimed when signing in on that same device

- **Settings Page** (Issue #93)
  - Comprehensive Settings page at `/settings` with tabbed layout
  - Four main settings categories:
    - **Account**: Profile link, email preferences (UI ready for future backend)
    - **Notifications**: Email/in-app notification controls (UI ready for future backend)
    - **Appearance**: Fully functional theme switcher (Light/Dark/System) using next-themes
    - **Privacy**: Data management and privacy controls (UI ready for future backend)
  - Fully functional theme switcher component:
    - Three theme options: Light, Dark, and System
    - Persists user preference across sessions
    - Hydration-safe implementation prevents flash of unstyled content
  - Mobile-responsive design with icon-only tabs on small screens
  - Accessibility features:
    - Proper ARIA labels and roles for tab navigation
    - Keyboard navigation support
    - Screen reader compatible
  - Settings link in UserMenu now properly navigates to `/settings`
  - Authentication guard redirects unauthenticated users to login
  - Comprehensive Cypress E2E test coverage:
    - Navigation from UserMenu to Settings
    - Tab switching and content visibility
    - Theme switcher functionality and persistence
    - Mobile responsiveness and accessibility
  - Settings infrastructure ready for future feature expansion
  - Note: Most settings are UI placeholders pending backend implementation

### Fixed

- **Board Deletion Error and Confirmation Dialog** (Issue #98)
  - Added confirmation dialog before deleting retrospective boards to prevent accidental deletion
  - Fixed RLS policy for anonymous board deletion by simplifying the WITH CHECK clause
  - Confirmation dialog displays board title and warns about permanent deletion
  - Cancel button allows users to abort deletion safely
  - Delete button styled as destructive action for clear visual indication
  - Added data-testid attributes for easier E2E testing
  - Comprehensive Cypress E2E test coverage for:
    - Confirmation dialog appearance and content
    - Cancellation flow
    - Successful deletion with confirmation
    - Undo functionality within 5 seconds
    - Archived board deletion
    - Board count updates after deletion
  - Follows same pattern as PokerSessionList for consistency
  - Improves UX by requiring explicit user confirmation before destructive action

- **User Full Name Display in Dropdown** (Issue #94)
  - Improved fallback logic in UserMenu to display email username instead of generic "User" when full_name is not available
  - Added retry logic (3 attempts with 500ms delay) for profile fetching to handle race conditions with database trigger
  - Made full name field required during signup to ensure users always provide their name
  - Fixed potential timing issue where profile might not load immediately after authentication
  - Added comprehensive Cypress E2E tests for:
    - Full name display after signup
    - Email username fallback when full name is missing
    - Profile retry logic with brief delays
    - Full name required field validation during signup

- **Dropdown Description Text Visibility** (Issue #92)
  - Improved visibility of description text in dropdown menus and select components on hover
  - Updated SelectItem component with hover state styling for better contrast
  - Updated DropdownMenuItem component with same hover behavior
  - Description text now changes to `text-accent-foreground/80` on focus/hover for improved readability
  - Added descriptions to UserMenu items (Profile: "View and edit profile", Settings: "Manage preferences")
  - Comprehensive Cypress E2E tests for dropdown description visibility
  - Ensures WCAG AA accessibility compliance with sufficient color contrast
  - Affects: Estimation sequence dropdown in Planning Poker, User menu, and all other dropdowns with descriptions

### Added

- **Password Confirmation Field on Signup Form** (Issue #89)
  - Added "Confirm Password" field to signup form to prevent password typos
  - Real-time validation to ensure passwords match before submission
  - Error messages displayed when passwords don't match
  - Submit button disabled when passwords don't match
  - Accessibility features:
    - `aria-invalid` attribute on confirm password field when passwords mismatch
    - `aria-describedby` linking to error message for screen readers
    - Error messages with `role="alert"` for proper announcement
  - Proper tab order: Name → Email → Password → Confirm Password
  - Both password fields cleared on duplicate email error for security
  - Comprehensive Cypress E2E test coverage for password confirmation validation
  - Jest unit tests for password confirmation logic
  - Updated existing signup tests to include confirm password field
- **Terms of Service Page** (Issue #81)
  - Comprehensive Terms of Service page at `/terms`
  - Detailed sections covering all legal requirements:
    - Acceptance of Terms (user agreement, scope of application)
    - Description of Service (ScrumKit features, open-source nature, self-hosting)
    - User Accounts (creation requirements, security responsibilities, termination)
    - Acceptable Use (prohibited activities, content restrictions, legal compliance)
    - Intellectual Property (MIT License terms, user content ownership, trademarks)
    - Disclaimers & Limitations (as-is provision, no warranty, liability limits)
    - Modifications to Terms (update rights, notification process)
    - Governing Law (jurisdiction, dispute resolution, severability)
  - Full MIT License text included in Intellectual Property section
  - Open-source specific legal guidance for self-hosted instances
  - Mobile-responsive layout with proper accessibility
  - Links back to home page for easy navigation
  - Comprehensive Cypress E2E test coverage
  - Updated footer links: Privacy and Terms now properly linked to respective pages
  - Updated auth form: Terms and Privacy Policy now clickable links
- **Privacy Policy Page** (Issue #80)
  - Comprehensive Privacy Policy page at `/privacy`
  - GDPR and CCPA compliance information
  - Detailed sections covering:
    - Information collection practices (account info, usage data, cookies)
    - Data usage policies (service provision, security, communication)
    - Data storage and security measures (Supabase, encryption, RLS)
    - User rights (access, rectification, erasure, data portability)
    - Third-party services disclosure (Supabase, OAuth providers)
    - Cookie policy and international data transfers
  - Self-hosting considerations and data ownership information
  - Open-source specific privacy guidance
  - Mobile-responsive layout with proper accessibility
  - Links back to home page for easy navigation
  - Comprehensive Cypress E2E test coverage
- **Planning Poker Mobile Optimization** (Issue #25 - EPIC-003 Story 9)
  - Mobile-optimized voting card layout with larger touch targets (44x44px minimum)
  - Swipeable carousel for card selection on mobile devices
    - Shows 3 cards in portrait mode, 5 in landscape mode
    - Navigation buttons and page indicators for easy browsing
  - Haptic feedback integration for touch interactions
    - Selection, success, error, and custom vibration patterns
    - User preference stored in localStorage
    - Graceful fallback on unsupported devices
  - Custom React hooks for mobile interactions:
    - `useTouch`: Detects swipe, tap, and long-press gestures
    - `useOrientation`: Tracks portrait/landscape orientation changes
  - Progressive Web App (PWA) capabilities
    - Offline support with service worker caching
    - Installable on mobile devices
    - Comprehensive workbox caching strategies for assets and API calls
  - Responsive design enhancements:
    - Touch-optimized button sizes and spacing
    - Landscape mode CSS optimizations for compact viewports
    - Mobile viewport fixes for iOS Safari
    - Safe area insets for notched devices
  - Enhanced web manifest with shortcuts and categories
  - Hidden keyboard shortcuts on mobile (touch-only interface)
- **Planning Poker Timer & Discussion Tools** (Issue #24 - EPIC-003 Story 8)
  - Discussion timer with preset durations (2, 5, 10 minutes)
  - Break timer mode with presets (5, 10, 15 minutes)
  - Custom timer duration input (1-60 minutes)
  - Pause/resume timer functionality
  - Visual progress indicator with color-coded warnings:
    - Green: 0-50% elapsed
    - Yellow: 50-75% elapsed
    - Amber: 75-90% elapsed
    - Orange: 90-99% elapsed
    - Red: 100% complete
  - Audio notifications for warnings (90%) and completion
  - Configurable sound notifications with mute toggle
  - Add time (+1 minute) during active timer
  - Timer preferences persistence in local storage
  - Accessible only to facilitators during voting sessions
  - Comprehensive test coverage for timer utilities and components
- Enhanced Progress component with custom indicator styling support
- **Planning Poker Statistics & Analytics** (Issue #23 - EPIC-003 Story 7)
  - Comprehensive session statistics with key metrics dashboard
  - Consensus percentage calculation and display (votes within 1 step of mode)
  - Estimation velocity tracking (stories per hour, average time per story)
  - Participant contribution breakdown with vote counts
  - Estimate distribution visualization with bar charts
  - Session summary component showing:
    - Stories completed (estimated/pending/skipped)
    - Average and median estimation time per story
    - Overall consensus rate across all stories
    - Active participant count
    - Most common estimates
  - CSV export functionality for session data including:
    - Story details (title, estimate, votes, time taken)
    - Vote distribution and consensus metrics
    - Participant contributions
    - Session summary statistics
  - Real-time statistics updates as stories are estimated
  - Export button with loading states and validation
  - Visual indicators for high consensus (≥70%)
- **Planning Poker Custom Estimation Sequences** (Issue #22 - EPIC-003 Story 6)
  - Custom sequence creator in session setup form
  - Support for numbers, text, and emoji values in custom sequences
  - Validation for 3-20 values in custom sequences
  - Emoji suggestions for fun sequences (speed, size, effort categories)
  - Examples: 🚀, 🏃, 🚶, 🐌, ☕, 🔥, ❄️, etc.
  - Parse and validate custom sequence values automatically
  - Custom sequences stored in database and used during voting
- **Planning Poker Story/Ticket Management** (Issue #18 - EPIC-003 Story 2)
  - Add, edit, and delete stories for estimation
  - Story form with fields: title, description, acceptance criteria, external link
  - Drag-and-drop story reordering with visual feedback
  - Set current story being estimated with clear visual indication
  - Story navigation controls (previous/next/jump to story)
  - Story status tracking (pending, voting, revealed, estimated, skipped)
  - Bulk CSV import for stories with validation and preview
  - CSV template download for easy import
  - Story queue display with action menus
  - Delete stories with 5-second undo capability
  - Real-time story updates across all participants
  - Support for anonymous sessions via cookie-based permissions
- **Planning Poker Session Management** (Issue #17 - EPIC-003 Story 1)
  - Create poker sessions with unique shareable URLs
  - Estimation sequence selection (Fibonacci, T-shirt sizes, Linear, Powers of 2)
  - Configurable session settings (auto-reveal, allow revoting, show voter names)
  - Session listing and history with active/archived filtering
  - End and archive session functionality
  - Delete sessions with undo capability
  - Cookie-based session tracking for anonymous users
  - Session rejoin capability after disconnection
  - Real-time infrastructure for poker sessions (channels and subscriptions)
- **Timer & Facilitation Tools** (Issue #15 - MVP Story 8)
  - Countdown timer component with presets (5, 10, 15, 20 minutes) and custom duration
  - Phase management system with 4 phases: Brainstorm, Group, Vote, Discuss
  - Focus mode to highlight one column at a time with visual dimming of others
  - Facilitator control panel with tabbed interface for all tools
  - Sound notifications for timer completion, phase changes, and focus mode toggles
  - Real-time synchronization of facilitator actions across all connected users
  - Compact displays in board header showing active timer, current phase, and focused column
  - Visual ring effect on focused columns
  - Configurable sound settings stored in localStorage
